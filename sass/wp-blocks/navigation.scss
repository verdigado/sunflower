@use "sass:map";

.wp-block-navigation {
    margin-top: var(--grid-margin);
    margin-bottom: var(--grid-margin);

    // Reset alle WordPress Standard-Styles
    *,
    *::before,
    *::after {
        border: none !important;
        outline: none !important;
    }

    a:hover {
        color: map.get($custom-colors, "klee") !important;
    }

    .wp-block-navigation__container {
        margin: 0;
        margin-right: var(--grid-margin);
        gap: var(--gap-large) !important;
        padding: 0;
        list-style: none;
        display: flex;
        flex-wrap: wrap;
        align-items: center;
    }

    .wp-block-navigation-item {
        position: relative;
        margin-bottom: 0;
        padding-left: 0;
        list-style: none;

        &::before {
            display: none !important;
        }
    }

    .wp-block-navigation-item__content {
        display: block;
        text-decoration: none !important;
        font-weight: 700;
        padding: 0.5rem 0.75rem;
        transition: color 0.3s ease;

        &:hover {
            text-decoration: none !important;
        }
    }


    .wp-block-navigation__submenu-container {
        list-style: none;
        padding: 8px 0 8px 0 !important;
        position: absolute;
        left: calc(-1 * calc(var(--gap-large) / 2));
        right: auto;
        top: 100%;
        background: map.get($custom-colors, "white") !important;
        z-index: 100;
        display: none;
        min-width: calc(100% + 20px);
        border-radius: 0 0 var(--border-radius-medium) var(--border-radius-medium) !important;
        width: fit-content;
        margin: 0 !important;
        overflow: hidden;

        > .wp-block-navigation-item > .wp-block-navigation-item__content {
            padding: 6px 12px !important;
            white-space: normal;
            max-width: 280px;
            font-weight: 500;
        }

        .wp-block-navigation__submenu-container {
            left: 0;
            top: initial !important;
            transform: none;
            display: block;
            position: relative;
            padding: 0 0 0 16px !important;
            border-radius: 0 !important;
            min-width: 100%;
            background: transparent !important;
        }
    }

    .wp-block-navigation-item.has-child:hover > .wp-block-navigation__submenu-container {
        display: block !important;
    }


    .wp-block-navigation__submenu-icon {
        display: none !important;
    }

    .wp-block-navigation-item.has-child {

        > .wp-block-navigation-item__content {
            padding-right: 18px;
            position: relative;
        }

        &::after {
            content: url("/wp-content/themes/sunflower26/assets/img/dropdown.svg");
            display: block;
            width: 13px;
            height: 13px;
            position: absolute;
            right: 0;
            top: 4px;

            @include media-breakpoint-down(xl) {
                top: 5px;
            }
        }

        .wp-block-navigation-item.has-child::after {
            display: none !important;
        }
    }

    .wp-block-navigation-item.has-child > .wp-block-navigation__submenu-container > .wp-block-navigation-item:first-child > .wp-block-navigation-item__content {
        padding-top: 0 !important;
    }

    .wp-block-navigation__responsive-container-open,
    .wp-block-navigation__responsive-container-close {
        display: none !important;
    }

    .wp-block-navigation__responsive-container {
        display: contents !important;
    }

    .wp-block-navigation__responsive-container-content {
        display: contents !important;
    }

    @media (max-width: 991px) {

        .wp-block-navigation__container {
            flex-direction: column !important;
            align-items: flex-start !important;
            gap: var(--gap-small);
            margin-right: 0;
            width: 100%;
        }

        .wp-block-navigation-item {
            width: 100%;
            display: flex !important;
            flex-direction: column !important;
            align-items: flex-start !important;
        }

        .wp-block-navigation-item.has-child {
            display: flex !important;
            flex-direction: column !important;
            align-items: flex-start !important;
        }

        .wp-block-navigation-item.has-child > .wp-block-navigation__submenu-container,
        .wp-block-navigation__submenu-container,
        .wp-block-navigation-item .wp-block-navigation__submenu-container {
            position: relative !important;
            display: flex !important;
            flex-direction: column !important;
            visibility: visible !important;
            opacity: 1 !important;
            height: auto !important;
            overflow: visible !important;
            padding: 8px 0 0 var(--gap-large) !important;
            top: 0 !important;
            left: 0 !important;
            background: transparent !important;
            border-radius: 0 !important;
            min-width: 100% !important;
            width: 100% !important;
            transform: none !important;
            pointer-events: auto !important;

            > .wp-block-navigation-item > .wp-block-navigation-item__content {
                font-weight: 500;
                padding: 4px 0 !important;
            }

            .wp-block-navigation__submenu-container {
                padding-top: 0 !important;
                padding-left: var(--gap-large) !important;
            }
        }

        .wp-block-navigation-item.has-child::after {
            display: none !important;
        }
    }
}

.top-bar.stuck .wp-block-navigation {

    .wp-block-navigation-item.has-child {

        &:hover {
            padding-bottom: 24px;
            margin-bottom: -24px;
        }

        &::after {
            top: -7.6px;

            @include media-breakpoint-down(xl) {
                top: -5.6px;
            }
        }

        .wp-block-navigation__submenu-container {
            top: 41px !important;
            padding: 0 0 8px 0 !important;

            @include media-breakpoint-down(xl) {
                top: 40px !important;
            }

            .wp-block-navigation__submenu-container {
                top: 0 !important;
                padding: 0 0 0 16px !important;
            }
        }

        > .wp-block-navigation__submenu-container > .wp-block-navigation-item:first-child > .wp-block-navigation-item__content {
            padding-top: 6px !important;
        }
    }

    @media (max-width: 991px) {

        .wp-block-navigation-item.has-child {

            &:hover {
                padding-bottom: 0;
                margin-bottom: 0;
            }

            .wp-block-navigation__submenu-container {
                top: 0 !important;
                padding: 12px 0 0 16px !important;
            }
        }
    }
}

.colorscheme-green .top-bar.stuck .wp-block-navigation {

    .wp-block-navigation-item__content {
        color: map.get($custom-colors, "schwarzwald");
    }
}

// Site Logo Block - Fallback SVG Styles
.wp-block-site-logo {

    .logo-background {
        background-color: #005538;
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 60px;
        height: 60px;

        @include media-breakpoint-down(xl) {
            border-radius: 6px;
            width: 46px;
            height: 46px;
        }

        .logo-img {
            color: map.get($custom-colors, "sonne");
            width: 46px !important;
            height: 46px !important;

            @include media-breakpoint-down(xl) {
                width: 35px !important;
                height: 35px !important;
            }
        }

        &:hover {
            background-color: map.get($custom-colors, "grashalm");

            .logo-img {
                color: map.get($custom-colors, "weiss");
            }
        }
    }

    // Custom Logo im Site-Logo Block - gleiche Größe wie logo-background
    .custom-logo-link:not(.logo-background) {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 60px;

        .custom-logo {
            max-height: 60px;
            max-width: 60px;
            width: auto;
            height: auto;
            object-fit: contain;
        }

        @include media-breakpoint-down(xl) {
            height: 46px;

            .custom-logo {
                max-height: 46px;
                max-width: 46px;
            }
        }
    }
}
